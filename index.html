<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>ğŸª„ AI ìºë¦­í„° í¬ì¦ˆ ìƒì„±ê¸° v4.1</title>
  <style>
    body{
      margin:0;
      background:#ffffff;
      color:#333;
      font-family:'Noto Sans KR',system-ui,sans-serif;
      text-align:center;
    }
    canvas{
      background:transparent;
      width:512px;
      height:512px;
      margin:16px;
      border-radius:12px;
      border:1px solid #ccc;
    }
    select,input,button{
      margin:6px;
      padding:8px;
      border-radius:8px;
      border:1px solid #aaa;
      background:#f7f7f7;
      color:#222;
      font-weight:500;
    }
    button{
      cursor:pointer;
      background:linear-gradient(180deg,#06b6d4,#0284c7);
      border:none;
      color:#fff;
      font-weight:700;
    }
    .wrap{max-width:1100px;margin:auto;padding:16px}
    .ctl{display:flex;flex-wrap:wrap;justify-content:center;gap:8px;margin-bottom:8px}
  </style>
</head>
<body>
  <div class="wrap">
    <h1>ğŸ§ AI ìºë¦­í„° í¬ì¦ˆ ìƒì„±ê¸° v4.1</h1>
    <p style="color:#555;font-size:14px;margin-top:-6px;">ë°ì€ ë°°ê²½ì—ì„œ ìºë¦­í„° ë¼ì¸ë“œë¡œì‰ì´ ì„ ëª…í•˜ê²Œ í‘œì‹œë©ë‹ˆë‹¤.</p>

    <div class="ctl">
      <label>ë¨¸ë¦¬í˜•</label>
      <select id="headType">
        <option>ê³°ëŒì´</option><option>ê³ ì–‘ì´</option><option>ê°•ì•„ì§€</option>
        <option>í­ê·„</option><option>ì˜¤ë¦¬</option><option>ê¸°ë¦°</option>
        <option>ì¹´í”¼ë°”ë¼</option><option>ì–‘ê°ˆë˜ë¨¸ë¦¬ ì—¬ì</option>
        <option>ìŠ¤í¬ì¸ ë¨¸ë¦¬ ë‚¨ì</option><option>ê¸´ë¨¸ë¦¬ ì—¬ì„±</option>
      </select>
      <label>í‘œì •</label>
      <select id="faceType">
        <option>ì›ƒìŒ</option><option>ìš¸ìŒ</option><option>í•˜íŠ¸ëˆˆ</option><option>ë³„ëˆˆ</option>
        <option>ì„ ê¸€ë¼ìŠ¤</option><option>ë¶„ë…¸</option><option>ì½”ë¯¹</option>
        <option>í•´ê³¨</option><option>Xëˆˆ</option><option>ìƒê°</option>
      </select>
      <label>ì„  ìŠ¤íƒ€ì¼</label>
      <select id="lineStyle">
        <option value="normal">ê¸°ë³¸</option>
        <option value="wobbly">ì°Œê¸€ì°Œê¸€</option>
        <option value="pixel">í”½ì…€</option>
        <option value="fuzzy">ë³µì‹¤ë³µì‹¤</option>
      </select>
      <label>ì„ ë‘ê»˜</label>
      <input type="range" id="lw" min="8" max="24" value="12"/>
      <label>íŒ” ê°ë„</label><input type="range" id="armAngle" min="-180" max="180" value="0"/>
      <label>ë‹¤ë¦¬ ê°ë„</label><input type="range" id="legAngle" min="0" max="360" value="30"/>
      <label>ëª¸ ê¸°ìš¸ê¸°</label><input type="range" id="bodyTilt" min="-45" max="45" value="0"/>
      <label>ë¨¸ë¦¬ ê¸°ìš¸ê¸°</label><input type="range" id="headTilt" min="-45" max="45" value="0"/>
    </div>
    <button id="saveBtn">PNG ì €ì¥</button>
    <canvas id="cv" width="1024" height="1024"></canvas>
  </div>

  <script>
  const cv=document.getElementById("cv"),ctx=cv.getContext("2d");
  const $=id=>document.getElementById(id);
  function deg2rad(d){return d*Math.PI/180;}

  function applyLineStyle(style){
    ctx.setLineDash([]);ctx.lineJoin='round';ctx.lineCap='round';
    ctx.imageSmoothingEnabled=true;
    if(style==="pixel"){ctx.imageSmoothingEnabled=false;}
  }

  function strokePath(style, drawFn){
    if(style==='wobbly'){
      for(let i=0;i<2;i++){ctx.save();ctx.translate(Math.random()*2-1,Math.random()*2-1);drawFn();ctx.stroke();ctx.restore();}
    }else if(style==='fuzzy'){
      for(let i=0;i<5;i++){ctx.save();ctx.translate(Math.random()*2-1,Math.random()*2-1);ctx.globalAlpha=0.25;drawFn();ctx.stroke();ctx.restore();}
      ctx.globalAlpha=1;
    }else{drawFn();ctx.stroke();}
  }

  function drawHeadShape(type,r){
    ctx.beginPath();
    if(type==='ê³°ëŒì´'){
      ctx.arc(-r*0.6,-r*0.7,r*0.3,0,Math.PI*2);
      ctx.arc(r*0.6,-r*0.7,r*0.3,0,Math.PI*2);
    }
    ctx.beginPath();
    if(['ê³°ëŒì´','ì¹´í”¼ë°”ë¼','ê°•ì•„ì§€','ê³ ì–‘ì´'].includes(type))
      ctx.ellipse(0,0,r*1.1,r*1.0,0,0,Math.PI*2);
    if(type==='í­ê·„') ctx.ellipse(0,0,r*1.0,r*1.2,0,0,Math.PI*2);
    if(type==='ê¸°ë¦°'){ctx.ellipse(0,0,r*0.9,r*1.3,0,0,Math.PI*2);
      ctx.moveTo(-r*0.3,-r*1.3);ctx.lineTo(-r*0.2,-r*1.6);
      ctx.moveTo(r*0.3,-r*1.3);ctx.lineTo(r*0.2,-r*1.6);}
    if(type==='ì˜¤ë¦¬'){ctx.ellipse(0,0,r*1.0,r*0.9,0,0,Math.PI*2);
      ctx.moveTo(-r*0.4,r*0.4);ctx.quadraticCurveTo(0,r*0.7,r*0.4,r*0.4);}
    if(type==='ì–‘ê°ˆë˜ë¨¸ë¦¬ ì—¬ì'){ctx.ellipse(0,0,r*1.0,r*1.0,0,0,Math.PI*2);
      ctx.arc(-r*0.9,-r*0.6,r*0.3,0,Math.PI*2);
      ctx.arc(r*0.9,-r*0.6,r*0.3,0,Math.PI*2);}
    if(type==='ìŠ¤í¬ì¸ ë¨¸ë¦¬ ë‚¨ì'){ctx.moveTo(-r,0);ctx.quadraticCurveTo(0,-r*1.2,r,0);ctx.lineTo(-r,0);}
    if(type==='ê¸´ë¨¸ë¦¬ ì—¬ì„±'){ctx.moveTo(-r,0);ctx.quadraticCurveTo(-r*1.1,r*1.5,0,r*1.6);
      ctx.quadraticCurveTo(r*1.1,r*1.5,r,0);}
    ctx.stroke();
  }

  function drawFace(type,r){
    ctx.beginPath();
    if(type==='ì›ƒìŒ'){ctx.arc(0,r*0.2,r*0.3,0,Math.PI,false);}
    if(type==='ìš¸ìŒ'){ctx.moveTo(-r*0.1,-r*0.1);ctx.lineTo(-r*0.1,r*0.3);ctx.moveTo(r*0.1,-r*0.1);ctx.lineTo(r*0.1,r*0.3);}
    if(type==='í•˜íŠ¸ëˆˆ'){ctx.moveTo(-r*0.3,-r*0.3);ctx.bezierCurveTo(-r*0.45,-r*0.5,-r*0.1,-r*0.6,-r*0.3,-r*0.3);
                        ctx.moveTo(r*0.3,-r*0.3);ctx.bezierCurveTo(r*0.45,-r*0.5,r*0.1,-r*0.6,r*0.3,-r*0.3);}
    if(type==='ë³„ëˆˆ'){for(let side of[-1,1]){ctx.save();ctx.translate(side*r*0.2,-r*0.2);
      for(let i=0;i<5;i++){ctx.lineTo(Math.cos((18+i*72)*Math.PI/180)*r*0.15,Math.sin((18+i*72)*Math.PI/180)*r*0.15);}ctx.restore();}}
    if(type==='ì„ ê¸€ë¼ìŠ¤'){ctx.rect(-r*0.4,-r*0.2,r*0.25,r*0.15);ctx.rect(r*0.15,-r*0.2,r*0.25,r*0.15);}
    if(type==='ë¶„ë…¸'){ctx.moveTo(-r*0.2,-r*0.3);ctx.lineTo(-r*0.1,-r*0.2);ctx.moveTo(r*0.2,-r*0.3);ctx.lineTo(r*0.1,-r*0.2);}
    if(type==='ì½”ë¯¹'){ctx.moveTo(-r*0.1,0);ctx.lineTo(r*0.1,0);ctx.moveTo(0,0);ctx.lineTo(0,r*0.2);}
    if(type==='í•´ê³¨'){ctx.arc(0,0,r*0.3,0,Math.PI*2);for(let i=-2;i<=2;i++){ctx.moveTo(i*r*0.05,r*0.3);ctx.lineTo(i*r*0.05,r*0.35);}}
    if(type==='Xëˆˆ'){ctx.moveTo(-r*0.3,-r*0.2);ctx.lineTo(-r*0.1,0);ctx.moveTo(-r*0.1,-r*0.2);ctx.lineTo(-r*0.3,0);
                     ctx.moveTo(r*0.3,-r*0.2);ctx.lineTo(r*0.1,0);ctx.moveTo(r*0.1,-r*0.2);ctx.lineTo(r*0.3,0);}
    if(type==='ìƒê°'){ctx.arc(-r*0.2,-r*0.2,r*0.05,0,Math.PI*2);ctx.arc(r*0.2,-r*0.2,r*0.05,0,Math.PI*2);}
    ctx.stroke();
  }

  function drawBody(lw,armA,legA,bodyTilt,headTilt,headR,style){
    ctx.clearRect(0,0,cv.width,cv.height);
    applyLineStyle(style);
    ctx.lineWidth=lw;ctx.strokeStyle='#000';
    const cx=512,cy=580;
    const bodyR=headR;
    ctx.save();ctx.translate(cx,cy);ctx.rotate(deg2rad(bodyTilt));
    strokePath(style,()=>{ctx.beginPath();ctx.ellipse(0,0,bodyR*0.8,bodyR*1.0,0,0,Math.PI*2);});
    drawLimb(-bodyR*0.8,-bodyR*0.2,armA,-1,bodyR,style);
    drawLimb(bodyR*0.8,-bodyR*0.2,-armA,1,bodyR,style);
    drawLeg(-bodyR*0.4,bodyR*0.9,legA,-1,bodyR,style);
    drawLeg(bodyR*0.4,bodyR*0.9,legA,1,bodyR,style);
    ctx.restore();
    ctx.save();ctx.translate(cx,cy-bodyR*1.3);ctx.rotate(deg2rad(headTilt));
    strokePath(style,()=>drawHeadShape($('headType').value,headR));
    drawFace($('faceType').value,headR);
    ctx.restore();
  }

  function drawLimb(x,y,angle,dir,r,style){
    ctx.save();ctx.translate(x,y);ctx.rotate(deg2rad(angle)*dir);
    strokePath(style,()=>{ctx.beginPath();ctx.moveTo(0,0);ctx.quadraticCurveTo(dir*r*0.3,r*0.3,dir*r*0.5,r*0.9);ctx.quadraticCurveTo(dir*r*0.25,r*0.5,0,0);});
    ctx.restore();
  }

  function drawLeg(x,y,angle,dir,r,style){
    ctx.save();ctx.translate(x,y);ctx.rotate(deg2rad(angle)*dir);
    strokePath(style,()=>{ctx.beginPath();ctx.moveTo(0,0);ctx.quadraticCurveTo(dir*r*0.3,r*0.4,dir*r*0.1,r*0.9);ctx.quadraticCurveTo(dir*r*0.2,r*0.6,0,0);});
    ctx.restore();
  }

  function randomName(){
    const heads=['bear','cat','dog','penguin','duck','giraffe','capybara','twintail','shortman','longhair'];
    const faces=['smile','cry','heart','star','sunglass','angry','comic','skull','xeye','think'];
    return heads[Math.floor(Math.random()*heads.length)]+'_'+faces[Math.floor(Math.random()*faces.length)]+'_pose.png';
  }

  function drawAll(){
    drawBody(parseInt($('lw').value),parseFloat($('armAngle').value),parseFloat($('legAngle').value),
      parseFloat($('bodyTilt').value),parseFloat($('headTilt').value),180,$('lineStyle').value);
  }

  ['lw','armAngle','legAngle','bodyTilt','headTilt','headType','faceType','lineStyle'].forEach(id=>{
    $(id).addEventListener('input',drawAll);
  });

  $('saveBtn').onclick=()=>{
    drawAll();
    const a=document.createElement('a');
    a.href=cv.toDataURL('image/png');
    a.download=randomName();
    a.click();
  };

  drawAll();
  </script>
</body>
</html>
